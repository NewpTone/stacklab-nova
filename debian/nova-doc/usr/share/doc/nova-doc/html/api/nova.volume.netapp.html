
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The nova.volume.netapp Module &mdash; nova 2012.2.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2012.2.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.tweet.js"></script>
    <link rel="top" title="nova 2012.2.1 documentation" href="../index.html" />
    <link rel="up" title="&lt;no title&gt;" href="autoindex.html" />
    <link rel="next" title="The nova.volume.netapp_nfs Module" href="nova.volume.netapp_nfs.html" />
    <link rel="prev" title="The nova.volume.manager Module" href="nova.volume.manager.html" /> 
  </head>
  <body>
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-nova.volume.netapp">
<span id="the-nova-volume-netapp-module"></span><h1>The <a class="reference internal" href="#module-nova.volume.netapp" title="nova.volume.netapp"><tt class="xref py py-mod docutils literal"><span class="pre">nova.volume.netapp</span></tt></a> Module<a class="headerlink" href="#module-nova.volume.netapp" title="Permalink to this headline">¶</a></h1>
<p>Volume driver for NetApp storage systems.</p>
<p>This driver requires NetApp OnCommand 5.0 and one or more Data
ONTAP 7-mode storage systems with installed iSCSI licenses.</p>
<dl class="class">
<dt id="nova.volume.netapp.DfmDataset">
<em class="property">class </em><tt class="descname">DfmDataset</tt><big>(</big><em>id</em>, <em>name</em>, <em>project</em>, <em>type</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.DfmDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
</dd></dl>

<dl class="class">
<dt id="nova.volume.netapp.DfmLun">
<em class="property">class </em><tt class="descname">DfmLun</tt><big>(</big><em>dataset</em>, <em>lunpath</em>, <em>id</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.DfmLun" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
</dd></dl>

<dl class="class">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver">
<em class="property">class </em><tt class="descname">NetAppCmodeISCSIDriver</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="nova.volume.driver.html#nova.volume.driver.ISCSIDriver" title="nova.volume.driver.ISCSIDriver"><tt class="xref py py-class docutils literal"><span class="pre">nova.volume.driver.ISCSIDriver</span></tt></a></p>
<p>NetApp C-mode iSCSI volume driver.</p>
<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.check_for_export">
<tt class="descname">check_for_export</tt><big>(</big><em>context</em>, <em>volume_id</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.check_for_export" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.check_for_setup_error">
<tt class="descname">check_for_setup_error</tt><big>(</big><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.check_for_setup_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the driver is working and can communicate.</p>
<p>Discovers the LUNs on the NetApp server.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.create_export">
<tt class="descname">create_export</tt><big>(</big><em>context</em>, <em>volume</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.create_export" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point to get the export info for a new volume.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.create_snapshot">
<tt class="descname">create_snapshot</tt><big>(</big><em>snapshot</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.create_snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point for creating a snapshot.</p>
<p>This driver implements snapshots by using efficient single-file
(LUN) cloning.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.create_volume">
<tt class="descname">create_volume</tt><big>(</big><em>volume</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.create_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point for creating a new volume.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.create_volume_from_snapshot">
<tt class="descname">create_volume_from_snapshot</tt><big>(</big><em>volume</em>, <em>snapshot</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.create_volume_from_snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point for creating a new volume from a snapshot.</p>
<p>Many would call this &#8220;cloning&#8221; and in fact we use cloning to implement
this feature.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.delete_snapshot">
<tt class="descname">delete_snapshot</tt><big>(</big><em>snapshot</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.delete_snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point for deleting a snapshot.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.delete_volume">
<tt class="descname">delete_volume</tt><big>(</big><em>volume</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.delete_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point for destroying existing volumes.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.do_setup">
<tt class="descname">do_setup</tt><big>(</big><em>context</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.do_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup the NetApp Volume driver.</p>
<p>Called one time by the manager after the driver is loaded.
Validate the flags we care about and setup the suds (web services)
client.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.ensure_export">
<tt class="descname">ensure_export</tt><big>(</big><em>context</em>, <em>volume</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.ensure_export" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point to get the export info for an existing volume.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.initialize_connection">
<tt class="descname">initialize_connection</tt><big>(</big><em>volume</em>, <em>connector</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.initialize_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point to attach a volume to an instance.</p>
<p>Do the LUN masking on the storage system so the initiator can access
the LUN on the target. Also return the iSCSI properties so the
initiator can find the LUN. This implementation does not call
_get_iscsi_properties() to get the properties because cannot store the
LUN number in the database. We only find out what the LUN number will
be during this method call so we construct the properties dictionary
ourselves.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.remove_export">
<tt class="descname">remove_export</tt><big>(</big><em>context</em>, <em>volume</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.remove_export" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver exntry point to remove an export for a volume.</p>
<p>Since exporting is idempotent in this driver, we have nothing
to do for unexporting.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppCmodeISCSIDriver.terminate_connection">
<tt class="descname">terminate_connection</tt><big>(</big><em>volume</em>, <em>connector</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppCmodeISCSIDriver.terminate_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point to unattach a volume from an instance.</p>
<p>Unmask the LUN on the storage system so the given intiator can no
longer access it.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nova.volume.netapp.NetAppISCSIDriver">
<em class="property">class </em><tt class="descname">NetAppISCSIDriver</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="nova.volume.driver.html#nova.volume.driver.ISCSIDriver" title="nova.volume.driver.ISCSIDriver"><tt class="xref py py-class docutils literal"><span class="pre">nova.volume.driver.ISCSIDriver</span></tt></a></p>
<p>NetApp iSCSI volume driver.</p>
<dl class="attribute">
<dt id="nova.volume.netapp.NetAppISCSIDriver.DATASET_METADATA_PROJECT_KEY">
<tt class="descname">DATASET_METADATA_PROJECT_KEY</tt><em class="property"> = 'OpenStackProject'</em><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.DATASET_METADATA_PROJECT_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nova.volume.netapp.NetAppISCSIDriver.DATASET_METADATA_VOL_TYPE_KEY">
<tt class="descname">DATASET_METADATA_VOL_TYPE_KEY</tt><em class="property"> = 'OpenStackVolType'</em><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.DATASET_METADATA_VOL_TYPE_KEY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nova.volume.netapp.NetAppISCSIDriver.DATASET_PREFIX">
<tt class="descname">DATASET_PREFIX</tt><em class="property"> = 'OpenStack_'</em><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.DATASET_PREFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nova.volume.netapp.NetAppISCSIDriver.IGROUP_PREFIX">
<tt class="descname">IGROUP_PREFIX</tt><em class="property"> = 'openstack-'</em><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.IGROUP_PREFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.check_for_export">
<tt class="descname">check_for_export</tt><big>(</big><em>context</em>, <em>volume_id</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.check_for_export" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.check_for_setup_error">
<tt class="descname">check_for_setup_error</tt><big>(</big><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.check_for_setup_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the driver is working and can communicate.</p>
<p>Invoke a web services API to make sure we can talk to the server.
Also perform the discovery of datasets and LUNs from DFM.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.create_export">
<tt class="descname">create_export</tt><big>(</big><em>context</em>, <em>volume</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.create_export" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point to get the export info for a new volume.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.create_snapshot">
<tt class="descname">create_snapshot</tt><big>(</big><em>snapshot</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.create_snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point for creating a snapshot.</p>
<p>This driver implements snapshots by using efficient single-file
(LUN) cloning.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.create_volume">
<tt class="descname">create_volume</tt><big>(</big><em>volume</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.create_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point for creating a new volume.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.create_volume_from_snapshot">
<tt class="descname">create_volume_from_snapshot</tt><big>(</big><em>volume</em>, <em>snapshot</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.create_volume_from_snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point for creating a new volume from a snapshot.</p>
<p>Many would call this &#8220;cloning&#8221; and in fact we use cloning to implement
this feature.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.delete_snapshot">
<tt class="descname">delete_snapshot</tt><big>(</big><em>snapshot</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.delete_snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point for deleting a snapshot.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.delete_volume">
<tt class="descname">delete_volume</tt><big>(</big><em>volume</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.delete_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point for destroying existing volumes.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.do_setup">
<tt class="descname">do_setup</tt><big>(</big><em>context</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.do_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup the NetApp Volume driver.</p>
<p>Called one time by the manager after the driver is loaded.
Validate the flags we care about and setup the suds (web services)
client.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.ensure_export">
<tt class="descname">ensure_export</tt><big>(</big><em>context</em>, <em>volume</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.ensure_export" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point to get the export info for an existing volume.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.initialize_connection">
<tt class="descname">initialize_connection</tt><big>(</big><em>volume</em>, <em>connector</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.initialize_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point to attach a volume to an instance.</p>
<p>Do the LUN masking on the storage system so the initiator can access
the LUN on the target. Also return the iSCSI properties so the
initiator can find the LUN. This implementation does not call
_get_iscsi_properties() to get the properties because cannot store the
LUN number in the database. We only find out what the LUN number will
be during this method call so we construct the properties dictionary
ourselves.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.remove_export">
<tt class="descname">remove_export</tt><big>(</big><em>context</em>, <em>volume</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.remove_export" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver exntry point to remove an export for a volume.</p>
<p>Since exporting is idempotent in this driver, we have nothing
to do for unexporting.</p>
</dd></dl>

<dl class="method">
<dt id="nova.volume.netapp.NetAppISCSIDriver.terminate_connection">
<tt class="descname">terminate_connection</tt><big>(</big><em>volume</em>, <em>connector</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppISCSIDriver.terminate_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Driver entry point to unattach a volume from an instance.</p>
<p>Unmask the LUN on the storage system so the given intiator can no
longer access it.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="nova.volume.netapp.NetAppLun">
<em class="property">class </em><tt class="descname">NetAppLun</tt><big>(</big><em>handle</em>, <em>name</em>, <em>size</em>, <em>metadata_dict</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppLun" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Represents a LUN on NetApp storage.</p>
<dl class="method">
<dt id="nova.volume.netapp.NetAppLun.get_metadata_property">
<tt class="descname">get_metadata_property</tt><big>(</big><em>prop</em><big>)</big><a class="headerlink" href="#nova.volume.netapp.NetAppLun.get_metadata_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the metadata property of a LUN.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="nova.volume.manager.html"
                                  title="previous chapter">The <tt class="docutils literal docutils literal docutils literal"><span class="pre">nova.volume.manager</span></tt> Module</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="nova.volume.netapp_nfs.html"
                                  title="next chapter">The <tt class="docutils literal"><span class="pre">nova.volume.netapp_nfs</span></tt> Module</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/api/nova.volume.netapp.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="nova.volume.netapp_nfs.html" title="The nova.volume.netapp_nfs Module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nova.volume.manager.html" title="The nova.volume.manager Module"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">nova 2012.2.1 documentation</a> &raquo;</li>
          <li><a href="../devref/index.html" >Developer Guide</a> &raquo;</li>
          <li><a href="autoindex.html" accesskey="U">&lt;no title&gt;</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010-present, OpenStack, LLC.
      Last updated on Thu Nov 1 16:11:51 2012, commit 4ed8d3e.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>